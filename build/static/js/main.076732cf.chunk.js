(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{39:function(e,t,o){},44:function(e,t,o){"use strict";o.r(t);var n=o(31),c=o.n(n),r=(o(39),o(12)),a=o(7),s=o(13),i=o(2),j=o(9),b=o(8);function l(e){var t=Object(a.useRef)(),o=Object(a.useState)(!1),n=Object(r.a)(o,2),c=(n[0],n[1]),i=Object(a.useState)(!1),l=Object(r.a)(i,2),O=l[0],u=l[1];return Object(s.b)((function(e,o){return t.current.rotation.x+=.01})),Object(b.jsxs)("mesh",Object(j.a)(Object(j.a)({},e),{},{ref:t,scale:O?1.5:1,castShadow:!0,onClick:function(e){return u(!O)},onPointerOver:function(e){return c(!0)},onPointerOut:function(e){return c(!1)},children:[Object(b.jsx)("boxGeometry",{args:[1,1,1]}),Object(b.jsx)("meshStandardMaterial",{color:e.color})]}))}var O=o(45),u=o(48),d=o(49);function x(e){var t=Object(a.useRef)(),o=Object(a.useRef)(),n=Object(a.useRef)(),c=Object(a.useRef)(),s=Object(a.useState)(new i.Vector3),j=Object(r.a)(s,2),l=j[0],x=j[1];return Object(a.useEffect)((function(){x(c.current.localToWorld(new i.Vector3(0,0,-10))),o.current.target=n.current,t.current.lookAt(e.lookAt.x,e.lookAt.y,e.lookAt.z),!0===e.orientationEnabled&&(t.current.rotation.y=t.current.rotation.y+Math.PI)}),[c,o,t,e.lookAt,e.orientationEnabled]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("object3D",{ref:t,position:e.position,children:[Object(b.jsx)(O.a,{makeDefault:!0,ref:c}),!0===e.orientationEnabled?Object(b.jsx)(u.a,{camera:c.current}):""]}),Object(b.jsx)(d.a,{position:e.position,ref:o,distance:20,angle:.5,decay:2,penumbra:1,attenuation:5,anglePower:5,castShadow:!0}),Object(b.jsx)("object3D",{position:l,ref:n})]})}var f=o(46),h=o(47);function p(e){var t=Object(h.a)("/navMesh.gltf").nodes,o=Object(a.useRef)(),n=Object(a.useRef)(),c=Object(a.useState)(!1),s=Object(r.a)(c,2),l=s[0],O=s[1],u=Object(a.useState)(new i.Vector3),d=Object(r.a)(u,2),x=d[0],p=d[1],g=Object(a.useState)(new i.Vector3),m=Object(r.a)(g,2),S=m[0],v=m[1];return Object(b.jsxs)(b.Fragment,{children:[!0===l?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f.b,{ref:n,args:[200,200],position:[0,0,0],"rotation-x":Math.PI/2,onPointerMove:function(e){v(new i.Vector3(e.point.x,e.point.y+1.65,e.point.z))},onPointerUp:function(){!0===l&&(e.playerMoveTo(x),e.playerLookAt(S),O(!1))},children:Object(b.jsx)("meshStandardMaterial",{color:"green",side:i.DoubleSide})}),Object(b.jsx)(f.a,{args:[.7,8],position:[S.x,x.y-1.63,S.z],"rotation-x":Math.PI/2,children:Object(b.jsx)("meshStandardMaterial",{color:"black",side:i.DoubleSide})}),Object(b.jsx)(f.a,{args:[.7,8],position:[x.x,x.y-1.64,x.z],"rotation-x":Math.PI/2,children:Object(b.jsx)("meshStandardMaterial",{color:"yellow",side:i.DoubleSide})})]}):Object(b.jsx)(b.Fragment,{}),Object(b.jsx)("group",Object(j.a)(Object(j.a)({ref:o},e),{},{dispose:null,children:Object(b.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.navMesh.geometry,scale:[2,2,2],onPointerDown:function(e){e.distance<10&&(O(!0),console.log(e.face),p(new i.Vector3(e.point.x,e.point.y+1.65,e.point.z)))},children:Object(b.jsx)("meshStandardMaterial",{color:"red",side:i.DoubleSide,wireframe:!0})})}))]})}function g(e){var t=Object(a.useRef)(),o=Object(h.a)("/pit_joined.gltf").nodes;return Object(b.jsx)("group",Object(j.a)(Object(j.a)({ref:t},e),{},{dispose:null,children:Object(b.jsx)("mesh",{scale:[1,1,1],castShadow:!0,receiveShadow:!0,geometry:o.Torus.geometry,children:Object(b.jsx)("meshToonMaterial",{})})}))}function m(e){var t=Object(a.useState)(!1),o=Object(r.a)(t,2),n=o[0],c=o[1],j=Object(a.useState)(new i.Vector3(0,1.65,0)),O=Object(r.a)(j,2),u=O[0],d=O[1],f=Object(a.useState)(new i.Vector3(1,1.65,10)),h=Object(r.a)(f,2),m=h[0],S=h[1];return Object(b.jsxs)(b.Fragment,{children:[!1===n?Object(b.jsx)("div",{className:"overlay",onClick:function(){c(!0)},children:"Start"}):"",Object(b.jsxs)(s.a,{onMouseMove:function(e){return e.preventDefault()},onTouchMove:function(e){return e.preventDefault()},children:[Object(b.jsx)("hemisphereLight",{args:[16777147,526368,.05],castShadow:!0}),Object(b.jsx)(l,{position:[3,5,-10],color:"navy"}),Object(b.jsx)(l,{position:[2,4,-10],color:"blue"}),Object(b.jsx)(l,{position:[1,3,-10],color:"teal"}),Object(b.jsx)(l,{position:[-3,5,-10],color:"pink"}),Object(b.jsx)(l,{position:[-2,4,-10],color:"orange"}),Object(b.jsx)(l,{position:[-1,3,-10],color:"red"}),Object(b.jsxs)(a.Suspense,{fallback:Object(b.jsx)(l,{}),children:[Object(b.jsx)(g,{}),Object(b.jsx)(p,{playerMoveTo:d,playerLookAt:S})]}),Object(b.jsx)(x,{position:[u.x,u.y,u.z],lookAt:m,orientationEnabled:n})]})]})}h.a.preload("/navMesh.gltf"),h.a.preload("/pit_joined.gltf");var S=document.getElementById("root");c.a.render(Object(b.jsx)(m,{}),S)}},[[44,1,2]]]);
//# sourceMappingURL=main.076732cf.chunk.js.map